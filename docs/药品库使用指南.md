# 药品库使用指南

## 功能概述

药品库页面提供了一个集中查看所有已采集药品的界面，方便用户快速浏览、排序和查找已入库的药品信息。

## 访问方式

1. **导航栏访问**: 点击顶部导航栏的"药品库"链接
2. **直接访问**: 访问 `http://127.0.0.1:5001/drugs`
3. **采集后跳转**: 在采集管理页面完成采集后，点击"查看已采集药品"链接

## 页面功能

### 1. 统计信息卡片

页面顶部显示四个统计信息卡片：

- **药品总数**: 数据库中已采集的药品总数
- **价格记录总数**: 所有药品的价格记录总和
- **当前页**: 当前浏览的页码
- **总页数**: 总共有多少页

### 2. 排序功能

提供三种排序方式：

- **🕒 最近更新**: 按最后采集时间排序（默认）
- **🔤 按名称**: 按药品名称字母顺序排序
- **📊 按价格数量**: 按价格记录数量从多到少排序

点击对应按钮即可切换排序方式。

### 3. 药品列表表格

表格显示以下信息：

| 列名 | 说明 |
|------|------|
| ID | 药品在数据库中的唯一标识 |
| 药品名称 | 药品名称和生产厂家 |
| 规格 | 药品规格（如 0.25g*100片） |
| 价格数量 | 该药品的价格记录数量 |
| 价格范围 | 最低价格 ~ 最高价格 |
| 最后采集 | 最近一次采集的时间 |
| 操作 | 查看详情按钮 |

### 4. 分页功能

- 每页显示 50 条记录
- 支持上一页/下一页导航
- 显示页码快速跳转
- 页码过多时自动省略显示

### 5. 快捷操作

页面底部提供三个快捷操作按钮：

- **📥 采集更多药品**: 跳转到采集管理页面
- **🔍 搜索药品**: 跳转到搜索页面
- **🏠 返回首页**: 返回系统首页

## 使用场景

### 场景1: 查看所有已采集药品

1. 访问药品库页面
2. 浏览药品列表，查看已入库的药品
3. 点击"查看"按钮查看药品详情

### 场景2: 查找价格记录最多的药品

1. 访问药品库页面
2. 点击"📊 按价格数量"排序按钮
3. 列表将按价格记录数量从多到少排序
4. 价格记录多的药品通常是热门药品或采集较完整的药品

### 场景3: 查看最近采集的药品

1. 访问药品库页面（默认按最近更新排序）
2. 列表顶部显示最近采集的药品
3. 可以快速查看刚刚采集的药品信息

### 场景4: 按名称查找药品

1. 访问药品库页面
2. 点击"🔤 按名称"排序按钮
3. 药品将按名称字母顺序排列
4. 方便按名称快速定位药品

## 数据说明

### 价格数量

- 显示该药品在数据库中的价格记录总数
- 包含所有供应商的价格信息
- 数量越多，说明该药品的供应商越多或采集次数越多

### 价格范围

- 显示该药品的最低价格和最高价格
- 绿色数字表示最低价
- 红色数字表示最高价
- 价格范围越大，说明不同供应商的价格差异越大

### 最后采集时间

- 显示该药品最近一次采集的时间
- 格式: YYYY-MM-DD HH:MM
- 时间越近，数据越新

## 注意事项

1. **数据实时性**: 药品库显示的是数据库中的历史数据，不是实时价格
2. **价格记录**: 同一药品可能有多个价格记录，代表不同供应商或不同时间的价格
3. **查看详情**: 点击"查看"按钮可以查看该药品的完整价格列表和历史趋势
4. **空数据**: 如果药品库为空，请先到采集管理页面采集药品数据

## 技术实现

- **后端**: Flask + SQLAlchemy
- **数据库**: SQLite
- **分页**: 每页50条记录
- **排序**: 支持多字段排序
- **性能**: 使用数据库聚合查询，高效处理大量数据

## 相关页面

- [采集管理页面](./批量采集使用指南.md): 采集新的药品数据
- [搜索页面](./使用手册.md): 搜索特定药品
- [药品详情页](./使用手册.md): 查看单个药品的详细信息
